Features
Drag & drop of blocks for content movement and insertion within the editor.
Report an issue
Installation
bun
npm
pnpm
yarn
pnpm add @udecode/plate-dnd @udecode/plate-node-id react-dnd react-dnd-html5-backend
Copy
Usage
import { DndPlugin } from '@udecode/plate-dnd';
import { NodeIdPlugin } from '@udecode/plate-node-id';
 
const plugins = [
  // ...otherPlugins,
  NodeIdPlugin,
  DndPlugin,
];
Copy
Then, wrap your plugin components with Draggable.

Plugins
DndPlugin
Options

enableScroller optional boolean
Enables the scroller feature.


scrollerProps optional Partial<ScrollerProps>
Props for the Scroller component.


dropTarget optional { id: string | null; line: DropLineDirection }
The current drop target state containing both the target element id and drop line direction.

API
focusBlockStartById
Selects the start of a block by ID and focuses the editor.

Parameters

id string
The ID of the block to be focused.

getBlocksWithId
Returns an array of blocks that have an ID.

OptionsEditorNodesOptions
The options for getting node entries.

ReturnsNodeEntry[]
Array of blocks that have an ID.

selectBlockById
Parameters

id string
The ID of the block to select.

Components
withDraggable
Enhances a component with draggable behavior.

Parameters

Draggable React.FC
The draggable component to be rendered.


Component React.FC
The component to be enhanced with draggable behavior.


options optional WithDraggableOptions
Options for draggable behavior.

OptionsWithDraggableOptions

level optional number | null
The level of the draggable component.


filter optional (editor: PlateEditor, path: Path) => boolean
Function that returns whether the component should be draggable.


allowReadOnly optional boolean
Whether the component should be draggable in read-only mode.


draggableProps optional T
Props to be passed to the draggable component.

DndScroller
A wrapper component for the Scroller component that is conditionally rendered based on the dragging state.

State

enabled boolean
A flag indicating whether the scroll area is enabled. If set to false, the scroll functionality is disabled.


height number
Height of the scrollable area in pixels.


zIndex number
The stack order of the scrollable area. An element with a higher z-index is drawn in front of an element with a lower one.


minStrength number
The minimum strength (speed) of the scrolling action. Higher values will make the scroll action more sensitive.


strengthMultiplier number
A multiplier that increases the scroll speed. Higher values will result in faster scrolling.


containerRef RefObject<any>
Reference to the scrollable container DOM element.


scrollAreaProps HTMLAttributes<HTMLDivElement>
Additional props for the scroll area div element.

Hooks
useDndNode
A custom hook that combines the useDragNode and useDropNode hooks to enable dragging and dropping of a node from the editor. It provides a default preview for the dragged node, which can be customized or disabled.

OptionsUseDndNodeOptions

element TElement
The node to be dragged.


type optional string
The type of drag item.

Default: 'block'

nodeRef any
The ref of the node to be dragged.


orientation optional 'horizontal' | 'vertical'
The orientation of drag and drop.

Default: 'vertical'

canDropNode optional (args: { dragEntry: NodeEntry; dragItem: DragItemNode; dropEntry: NodeEntry; editor: PlateEditor }) => boolean
Callback to determine if a node can be dropped at the current location.


preview optional previewOptions
The preview options for the dragged node.


drag optional dragOptions
The drag options for the dragged node.


drop optional dropOptions
The drop options for the dragged node.


onDropHandler optional string
Handler called when the node is dropped.

Returnsobject

isDragging boolean
Whether the node is currently being dragged.


isOver boolean
Whether the dragged node is over a drop target.


dragRef ConnectDragSource
Drag reference for the draggable element.

useDragNode
A custom hook that enables dragging of a node from the editor using the useDrag hook from react-dnd.

OptionsUseDragNodeOptions

element TElement
The node to be dragged.


item optional DragObject | DragObjectFactory<DragObject>
Drag object or factory function that returns it.

useDraggable
A custom hook that enables draggable behavior for a given element. It provides a preview for the element, which can be customized or disabled.

Optionsobject

element TElement
The element to make draggable.


orientation optional 'horizontal' | 'vertical'
Orientation of drag and drop.

Default: 'vertical'

type optional string
Type of drag item.

Default: 'block'

onDropHandler optional function
Handler called when element is dropped.

Returnsobject

handleRef (element: Element | React.ReactElement | React.RefObject<any> | null) => void
Drag source connector function.


isDragging boolean
Whether element is being dragged.


previewRef React.RefObject<HTMLDivElement>
Reference to draggable element.

useDropNode
A custom hook that enables dropping a node on the editor. It uses the useDrop hook from react-dnd to handle the drop behavior.

OptionsUseDropNodeOptions

nodeRef any
Reference to the node being dragged.


element TElement
The node to which the drop line is attached.


dropLine string
Current value of the drop line.


onChangeDropLine function
Callback when drop line changes.


onDropHandler object
Callback that intercepts drop handling.

Returns true to prevent default behavior
Returns false to run default behavior after
useDropLine
Returns the current drop line state for an element.

Optionsobject

id optional string
Element ID to show drop line for.

Default: Current element ID

orientation optional 'horizontal' | 'vertical'
Filter drop lines by orientation.

Default: 'vertical'
Returnsobject

dropLine 'top' | 'bottom' | 'left' | 'right' | ''
Current drop line direction.